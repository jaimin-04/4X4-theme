(()=>{(()=>{let n=document.getElementById("template-cart-notify"),t=n.content.firstElementChild;n.insertAdjacentElement("beforebegin",t),n.remove();let c=t.getElementsByClassName("js-modal-close"),a=t.querySelector(".js-image"),u=t.querySelector(".js-qty"),i=t.querySelector(".js-item-total-money"),s=t.querySelector(".js-cart-total-money");typeof Currencies!="undefined"&&(Currencies.registerObserve(i),Currencies.registerObserve(s));let y=t.querySelector(".js-cart-number"),d=t.querySelector(".js-name");Cart.notify={show:e=>{let o=Cart.value.items.reduce((r,l)=>(l.id!==e.id&&(r+=l.final_line_price),r),0)+e.final_line_price,m=Cart.value.items.reduce((r,l)=>(l.id!==e.id&&(r+=l.quantity),r),0)+e.quantity;a.src=AT.getSizedImageUrl(e.featured_image&&e.featured_image.url?e.featured_image.url:theme.assets.defaultImage,"200x"),a.alt=e.product_title,d.innerHTML=e.product_title,u.innerHTML=e.quantity,typeof Currencies!="undefined"?(i.setAttribute("data-money",e.final_line_price),s.setAttribute("data-money",o)):(i.innerHTML=e.final_line_price.toCurrency(),s.innerHTML=o.toCurrency()),y.innerHTML=m>1?theme.strings.cartNumbers.replace("{{count}}",m):theme.strings.cartNumber.replace("{{count}}",m),AT.disableScroll(),t.addClass("is-open")},close:()=>{AT.enableScroll(),t.removeClass("is-open"),AT.debounce(()=>{a.src=""},200)()}},c.addEvents("click",Cart.notify.close)})();})();
