(()=>{var S=(e,r,h)=>{let t={};if(!e)return;let u=e.dataset.status,n=e.getElementsByClassName("js-option-item");if(r.variants.length<=1)return;n.addEvents("change",function(){e.dispatchEvent(new CustomEvent("swatch-change",{detail:+this.dataset.optionPosition}))}),e.addEvent("swatch-change",function({detail:i}){switch(i){case 1:r.options.length>1?s(2):h(m(c()));break;case 2:r.options.length===3?r.options.length===3&&s(3):h(m(c()));break;case 3:h(m(c()));break}}),r.variants.forEach(i=>{if(i.available){if(t.root=t.root||[],t.root.push(i.option1),t.root=t.root.reduce((d,l)=>(d.includes(l)||d.push(l),d),[]),r.options.length>1){var a=i.option1;t[a]=t[a]||[],t[a].push(i.option2),t[a]=t[a].reduce((d,l)=>(d.includes(l)||d.push(l),d),[])}if(r.options.length===3){var a=i.option1+" / "+i.option2;t[a]=t[a]||[],t[a].push(i.option3),t[a]=t[a].reduce((l,p)=>(l.includes(p)||l.push(p),l),[])}}}),s(1);function s(i){let a=!1,d=c(),l,p,v;switch(i){case 1:l="root",p=e.querySelector(".js-swatch-item[data-position='1']");break;case 2:l=d.option1,p=e.querySelector(".js-swatch-item[data-position='2']");break;case 3:l=d.option1+" / "+d.option2,p=e.querySelector(".js-swatch-item[data-position='3']");break}switch(p.dataset.style){case"select":{let o=p.getElementsByClassName("js-option-item")[0],f=o.value;switch(u){case"hide":{o.innerHTML=t[l].map(g=>`<option value="${g}">${g}</option>`).join(""),t[l].includes(f)&&(o.value=f);break}case"disable":{[...o.options].forEach(g=>{t[l].includes(g.value)?g.disabled=!1:(g.disabled=!0,g.value===f&&(g.selected=!1))});break}}break}case"color":case"button":let y=p.getElementsByClassName("js-option-item"),C=[...y].find(o=>o.checked).value;switch(u){case"hide":y.forEach(o=>{t[l].includes(o.value)?o.parentElement.removeClass("d-none"):(o.parentElement.addClass("d-none"),C===o.value&&(o.checked=!1,y[0].checked=!0))});break;case"disable":{y.forEach(o=>{t[l].includes(o.value)?o.disabled=!1:(o.disabled=!0,C===o.value&&(o.checked=!1,y[0].checked=!0))});break}}break}e.dispatchEvent(new CustomEvent("swatch-change",{detail:i}))}function c(){return[...e.getElementsByClassName("js-swatch-item")].reduce((i,a)=>{switch(a.dataset.style){case"select":let d=a.querySelector("select.single-option-selector");i[d.name]=d.value;break;case"color":case"image":case"button":let l=a.querySelectorAll("input[data-single-option-selector]");i[l[0].name]=[...l].find(p=>p.checked).value;break}return i},{})}function m(i){return r.variants.find(a=>Object.keys(i).every(d=>a[d]===i[d]))}};var w=()=>{let e=theme.product.handle,r=AT.cookie.get("recently-viewed-products")||[];r.length?(!r.includes(e)&&r.unshift(e),r.length=10):r.unshift(e),AT.cookie.set("recently-viewed-products",r.filter(Boolean),7)};function b(e){var r=n=>{let s=[],c;return n.querySelectorAll(".media-item").forEach(m=>{let i=m.querySelector("img");!i||(c={src:m.dataset.imgUrl,w:+i.getAttribute("width"),h:+i.getAttribute("height"),el:i},c.o={src:c.src,w:+i.getAttribute("width"),h:+i.getAttribute("height")},s.push(c))}),s},h=(n,s)=>n&&(s(n)?n:h(n.parentNode,s)),t=n=>{n.preventDefault();var s=n.target||n.srcElement,c=h(s,m=>m.hasClass("media-item"));if(!!c)return u(c.dataset.position-1),!1},u=(n,s,c)=>{var m=document.getElementById("modal-image-zoom"),i,a,d;if(d=r(e),a={galleryUID:e.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(o){var f=d[o].el,g=window.pageYOffset||document.documentElement.scrollTop,E=f.getBoundingClientRect();return{x:E.left,y:E.top+g,w:E.width}}},c)if(a.galleryPIDs){for(var l=0;l<d.length;l++)if(d[l].pid==n){a.index=l;break}}else a.index=parseInt(n,10)-1;else a.index=parseInt(n,10);if(!isNaN(a.index)){s&&(a.showAnimationDuration=0),i=new PhotoSwipe(m,PhotoSwipeUI_Default,d,a);var p,v=!1,y=!0,C;i.listen("beforeResize",function(){var o=window.devicePixelRatio?window.devicePixelRatio:1;o=Math.min(o,2.5),p=i.viewportSize.x*o,p>=1200||!i.likelyTouchDevice&&p>800||screen.width>1200?v||(v=!0,C=!0):v&&(v=!1,C=!0),C&&!y&&i.invalidateCurrItems(),y&&(y=!1),C=!1}),i.listen("afterChange",()=>{!!this.mainSlider&&typeof this.mainSlider.goTo=="function"&&this.mainSlider.goTo(i.getCurrentIndex())}),i.listen("gettingData",function(o,f){f.src=f.o.src,f.w=f.o.w,f.h=f.o.h}),i.init()}};e.querySelectorAll("img").forEach(n=>{let s=!1,c=!1;n.addEvent("mousedown",()=>{c=!0}),n.addEvent("mouseup",m=>{s||t(m),c=!1,s=!1}),n.addEvent("mousemove",m=>{c&&(s=!0)})}),e.setAttribute("data-pswp-uid",1)}var q={onLoad:function(){let e=this.container;this.product=theme.product,this.elms={priceCompareElement:e.querySelector(".js-compare-at-price"),priceElement:e.querySelector(".js-product-price"),variantAvailableStatus:e.querySelector(".js-product-status"),skuElement:e.querySelector(".js-product-sku"),mainMediaContainer:document.querySelector(".js-slider-main"),thumbnailsMediaContainer:document.querySelector(".js-slider-thumbnails"),tabPanelElement:e.querySelector(".js-tab-panel"),selectMaster:e.querySelector("#selected_variant"),inputQuantityContainer:e.querySelector(".js-input-quantity-container"),formElm:e.querySelector(".js-form-add-to-card"),buttonAddToCart:document.querySelector(".btn-add-to-cart"),swatchFormContainer:e.querySelector(".js-swatch-form")},this.initSlideMedia(),AT.initInputQuantity(this.elms.inputQuantityContainer),AT.initTabPanel(this.elms.tabPanelElement),AT.initFormAddToCart(this.elms.formElm),S(this.elms.swatchFormContainer,this.product,this.handleVariantChange.bind(this)),!!this.elms.mainMediaContainer&&b.call(this,this.elms.mainMediaContainer)},initSlideMedia:function(){let{mainMediaContainer:e,thumbnailsMediaContainer:r}=this.elms,h,t;u.call(this),(()=>{if(!r)return;let n=JSON.parse(r.querySelector("[data-tns-config]").innerHTML),s;window.innerWidth>=768?(s="vertical",n.axis=s,t=tns(n)):(s="horizontal",n.axis=s,t=tns(n)),window.addEvent("resize",()=>{window.innerWidth>=768&&s!=="vertical"?(t.destroy(),s="vertical",n.axis=s,t=tns(n),this.mainSlider.destroy(),u.call(this)):window.innerWidth<=767.9&&s!=="horizontal"&&(t.destroy(),s="horizontal",n.axis=s,t=tns(n),this.mainSlider.destroy(),u.call(this))})})();function u(){if(!e)return;let n=e.querySelector("[data-tns-config]");if(!n)return;let s=JSON.parse(n.innerHTML);this.mainSlider=tns(s),this.mainSlider.events.on("indexChanged",c=>{c.slideItems.forEach(m=>{m.querySelector("video")&&m.querySelector("video").pause()}),c.slideItems[c.index].querySelector("video")&&c.slideItems[c.index].querySelector("video").play()})}},handleVariantChange:function(e){let{priceCompareElement:r,priceElement:h,variantAvailableStatus:t,skuElement:u,buttonAddToCart:n,selectMaster:s}=this.elms;if(!e){n.disabled=!0,t.setAttribute("data-status","0");return}typeof Currencies!="undefined"?(e.compare_at_price?(r.setAttribute("data-money",e.compare_at_price),r.removeClass("d-none")):r.addClass("d-none"),h.setAttribute("data-money",e.price)):(e.compare_at_price?(r.innerHTML=e.compare_at_price.toCurrency(),r.removeClass("d-none")):r.addClass("d-none"),h.innerHTML=e.price.toCurrency()),e.available?(n.disabled=!1,t.setAttribute("data-status","1")):(n.disabled=!0,t.setAttribute("data-status","0")),t.setAttribute("data-status",e.available?1:0),u&&(e.sku?(u.innerHTML=e.sku,u.parentElement.removeClass("d-none")):u.parentElement.addClass("d-none")),!!e.featured_image&&!!this.mainSlider&&this.mainSlider.goTo(e.featured_image.position-1),s.value=e.id}};var j={onLoad:function(){let{container:e}=this,r=e.querySelector(".js-slider-container"),h=JSON.parse(r.querySelector("[data-tns-config]").innerHTML);h.onInit=()=>{r.addClass("slider-initialized")},tns(h)}};var k={onLoad(){AT.cookie.get("recently-viewed-products"),AT.cookie.get("recently-viewed-products")&&this.getListProducts(AT.cookie.get("recently-viewed-products"))},getListProducts(e){let r=e.filter(h=>h!=theme.product.handle);Promise.all(r.map(h=>fetch(`${theme.routes.searchUrl}?view=product-card&q=${h}`,{dataType:"text"}).then(t=>{let u=document.createElement("div");return u.addClass("slider-item"),u.innerHTML=t,ProductCard.initEvent(u),u}))).then(h=>{let t=h.filter(Boolean);t.length&&(t.forEach(u=>{this.container.querySelector(".slider-list").append(u)}),this.container.removeClass("d-none"),this.initSlider())})},initSlider(){let e=JSON.parse(this.container.querySelector("[data-tns-config]").innerHTML),r=this.container.querySelector(".js-slider-container");e.onInit=()=>{r.addClass("slider-initialized")},tns(e)}};(()=>{theme.sectionRegister.forEach(e=>{switch(e){case"product-template":register(e,q);break;case"related-product":register(e,j);break;case"recently-viewed":register(e,k);break}load("*")}),w(),console.log("product-no-sb-page.js loaded")})();})();
