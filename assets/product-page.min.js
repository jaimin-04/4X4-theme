(()=>{var S=(e,n,o)=>{let i={};if(!e)return;let d=e.dataset.status,r=e.getElementsByClassName("js-option-item");if(n.variants.length<=1)return;r.addEvents("change",function(){e.dispatchEvent(new CustomEvent("swatch-change",{detail:+this.dataset.optionPosition}))}),e.addEvent("swatch-change",function({detail:t}){switch(t){case 1:n.options.length>1?u(2):o(p(h()));break;case 2:n.options.length===3?n.options.length===3&&u(3):o(p(h()));break;case 3:o(p(h()));break}}),n.variants.forEach(t=>{if(t.available){if(i.root=i.root||[],i.root.push(t.option1),i.root=i.root.reduce((c,a)=>(c.includes(a)||c.push(a),c),[]),n.options.length>1){var s=t.option1;i[s]=i[s]||[],i[s].push(t.option2),i[s]=i[s].reduce((c,a)=>(c.includes(a)||c.push(a),c),[])}if(n.options.length===3){var s=t.option1+" / "+t.option2;i[s]=i[s]||[],i[s].push(t.option3),i[s]=i[s].reduce((a,m)=>(a.includes(m)||a.push(m),a),[])}}}),u(1);function u(t){let s=!1,c=h(),a,m,v;switch(t){case 1:a="root",m=e.querySelector(".js-swatch-item[data-position='1']");break;case 2:a=c.option1,m=e.querySelector(".js-swatch-item[data-position='2']");break;case 3:a=c.option1+" / "+c.option2,m=e.querySelector(".js-swatch-item[data-position='3']");break}switch(m.dataset.style){case"select":{let l=m.getElementsByClassName("js-option-item")[0],f=l.value;switch(d){case"hide":{l.innerHTML=i[a].map(g=>`<option value="${g}">${g}</option>`).join(""),i[a].includes(f)&&(l.value=f);break}case"disable":{[...l.options].forEach(g=>{i[a].includes(g.value)?g.disabled=!1:(g.disabled=!0,g.value===f&&(g.selected=!1))});break}}break}case"color":case"button":let y=m.getElementsByClassName("js-option-item"),C=[...y].find(l=>l.checked).value;switch(d){case"hide":y.forEach(l=>{i[a].includes(l.value)?l.parentElement.removeClass("d-none"):(l.parentElement.addClass("d-none"),C===l.value&&(l.checked=!1,y[0].checked=!0))});break;case"disable":{y.forEach(l=>{i[a].includes(l.value)?l.disabled=!1:(l.disabled=!0,C===l.value&&(l.checked=!1,y[0].checked=!0))});break}}break}e.dispatchEvent(new CustomEvent("swatch-change",{detail:t}))}function h(){return[...e.getElementsByClassName("js-swatch-item")].reduce((t,s)=>{switch(s.dataset.style){case"select":let c=s.querySelector("select.single-option-selector");t[c.name]=c.value;break;case"color":case"image":case"button":let a=s.querySelectorAll("input[data-single-option-selector]");t[a[0].name]=[...a].find(m=>m.checked).value;break}return t},{})}function p(t){return n.variants.find(s=>Object.keys(t).every(c=>s[c]===t[c]))}};var w=()=>{let e=theme.product.handle,n=AT.cookie.get("recently-viewed-products")||[];n.length?(!n.includes(e)&&n.unshift(e),n.length=10):n.unshift(e),AT.cookie.set("recently-viewed-products",n.filter(Boolean),7)};function b(e){var n=r=>{let u=[],h;return r.querySelectorAll(".media-item").forEach(p=>{let t=p.querySelector("img");!t||(h={src:p.dataset.imgUrl,w:+t.getAttribute("width"),h:+t.getAttribute("height"),el:t},h.o={src:h.src,w:+t.getAttribute("width"),h:+t.getAttribute("height")},u.push(h))}),u},o=(r,u)=>r&&(u(r)?r:o(r.parentNode,u)),i=r=>{r.preventDefault();var u=r.target||r.srcElement,h=o(u,p=>p.hasClass("media-item"));if(!!h)return d(h.dataset.position-1),!1},d=(r,u,h)=>{var p=document.getElementById("modal-image-zoom"),t,s,c;if(c=n(e),s={galleryUID:e.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(l){var f=c[l].el,g=window.pageYOffset||document.documentElement.scrollTop,E=f.getBoundingClientRect();return{x:E.left,y:E.top+g,w:E.width}}},h)if(s.galleryPIDs){for(var a=0;a<c.length;a++)if(c[a].pid==r){s.index=a;break}}else s.index=parseInt(r,10)-1;else s.index=parseInt(r,10);if(!isNaN(s.index)){u&&(s.showAnimationDuration=0),t=new PhotoSwipe(p,PhotoSwipeUI_Default,c,s);var m,v=!1,y=!0,C;t.listen("beforeResize",function(){var l=window.devicePixelRatio?window.devicePixelRatio:1;l=Math.min(l,2.5),m=t.viewportSize.x*l,m>=1200||!t.likelyTouchDevice&&m>800||screen.width>1200?v||(v=!0,C=!0):v&&(v=!1,C=!0),C&&!y&&t.invalidateCurrItems(),y&&(y=!1),C=!1}),t.listen("afterChange",()=>{!!this.mainSlider&&typeof this.mainSlider.goTo=="function"&&this.mainSlider.goTo(t.getCurrentIndex())}),t.listen("gettingData",function(l,f){f.src=f.o.src,f.w=f.o.w,f.h=f.o.h}),t.init()}};e.querySelectorAll("img").forEach(r=>{let u=!1,h=!1;r.addEvent("mousedown",()=>{h=!0}),r.addEvent("mouseup",p=>{u||i(p),h=!1,u=!1}),r.addEvent("mousemove",p=>{h&&(u=!0)})}),e.setAttribute("data-pswp-uid",1)}var q={onLoad:function(){let e=this.container;this.product=theme.product,this.elms={priceCompareElement:e.querySelector(".js-compare-at-price"),priceElement:e.querySelector(".js-product-price"),variantAvailableStatus:e.querySelector(".js-product-status"),skuElement:e.querySelector(".js-product-sku"),mainMediaContainer:document.querySelector(".js-slider-main"),thumbnailsMediaContainer:document.querySelector(".js-slider-thumbnails"),tabPanelElement:e.querySelector(".js-tab-panel"),selectMaster:e.querySelector("#selected_variant"),inputQuantityContainer:e.querySelector(".js-input-quantity-container"),formElm:e.querySelector(".js-form-add-to-card"),buttonAddToCart:document.querySelector(".btn-add-to-cart"),swatchFormContainer:e.querySelector(".js-swatch-form"),openSbBtn:document.getElementById("js_open_sidebar"),closeSbBtn:document.getElementById("js_close_sidebar"),sbContainer:document.getElementById("sidebarDrawer"),recentlyViewContainer:document.getElementById("product_sb_recently_view")},this.initSlideMedia(),AT.initInputQuantity(this.elms.inputQuantityContainer),AT.initTabPanel(this.elms.tabPanelElement),!!this.elms.formElm&&AT.initFormAddToCart(this.elms.formElm),S(this.elms.swatchFormContainer,this.product,this.handleVariantChange.bind(this)),!!this.elms.mainMediaContainer&&b.call(this,this.elms.mainMediaContainer)},initSlideMedia:function(){let{mainMediaContainer:e,thumbnailsMediaContainer:n}=this.elms;(()=>{if(!e)return;let o=e.querySelector("[data-tns-config]");if(!o)return;let i=JSON.parse(o.innerHTML);this.mainSlider=tns(i),this.mainSlider.events.on("indexChanged",d=>{d.slideItems.forEach(r=>{r.querySelector("video")&&r.querySelector("video").pause()}),d.slideItems[d.index].querySelector("video")&&d.slideItems[d.index].querySelector("video").play()})})(),(()=>{if(!n)return;let o=JSON.parse(n.querySelector("[data-tns-config]").innerHTML);tns(o)})()},handleVariantChange:function(e){let{priceCompareElement:n,priceElement:o,variantAvailableStatus:i,skuElement:d,buttonAddToCart:r,selectMaster:u}=this.elms;if(!e){r.disabled=!0,i.setAttribute("data-status","0");return}typeof Currencies!="undefined"?(e.compare_at_price?(n.setAttribute("data-money",e.compare_at_price),n.removeClass("d-none")):n.addClass("d-none"),o.setAttribute("data-money",e.price)):(e.compare_at_price?(n.innerHTML=e.compare_at_price.toCurrency(),n.removeClass("d-none")):n.addClass("d-none"),o.innerHTML=e.price.toCurrency()),e.available?(r.disabled=!1,i.setAttribute("data-status","1")):(r.disabled=!0,i.setAttribute("data-status","0")),i.setAttribute("data-status",e.available?1:0),d&&(e.sku?(d.innerHTML=e.sku,d.parentElement.removeClass("d-none")):d.parentElement.addClass("d-none")),!!e.featured_image&&!!this.mainSlider&&this.mainSlider.goTo(e.featured_image.position-1),u.value=e.id}};var j={onLoad:function(){let{container:e}=this,n=e.querySelector(".js-slider-container"),o=JSON.parse(n.querySelector("[data-tns-config]").innerHTML);o.onInit=()=>{n.addClass("slider-initialized")},tns(o)}};var k={onLoad(){AT.cookie.get("recently-viewed-products"),AT.cookie.get("recently-viewed-products")&&this.getListProducts(AT.cookie.get("recently-viewed-products"))},getListProducts(e){let n=e.filter(o=>o!=theme.product.handle);Promise.all(n.map(o=>fetch(`${theme.routes.searchUrl}?view=product-card&q=${o}`,{dataType:"text"}).then(i=>{let d=document.createElement("div");return d.addClass("slider-item"),d.innerHTML=i,ProductCard.initEvent(d),d}))).then(o=>{let i=o.filter(Boolean);i.length&&(i.forEach(d=>{this.container.querySelector(".slider-list").append(d)}),this.container.removeClass("d-none"),this.initSlider())})},initSlider(){let e=JSON.parse(this.container.querySelector("[data-tns-config]").innerHTML),n=this.container.querySelector(".js-slider-container");e.onInit=()=>{n.addClass("slider-initialized")},tns(e)}};(()=>{theme.sectionRegister.forEach(e=>{switch(e){case"product-template":register(e,q);break;case"related-product":register(e,j);break;case"recently-viewed":register(e,k);break}}),w(),load("*")})();})();
