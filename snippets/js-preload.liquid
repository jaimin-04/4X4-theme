{{ 'jquery.min.js' | asset_url | script_tag }}
{% comment %} <link href="{{'lazysizes.min.js' | asset_url}}" rel="preload" as="script">
<link href="{{'tiny-slider.min.js' | asset_url}}" rel="preload" as="script">
<link href="{{'common.min.js' | asset_url}}" rel="preload" as="script">

{%- case template.name -%}
  {%- when 'index' -%}
    <link href="{{'home.min.js' | asset_url}}" rel="preload" as="script">
  {%- when 'article' -%}
    <link href="{{'article-page.min.js' | asset_url}}" rel="preload" as="script">
  {%- when 'cart' -%}
    <link href="{{'cart-page.min.js' | asset_url}}" rel="preload" as="script">
  {%- when 'product' -%}
    <link href="{{'photoswipe.min.js' | asset_url}}" rel="preload" as="script">
    {%- case template.suffix -%}
      {%- when 'no-sidebar' -%}
        <link href="{{'product-no-sb-page.min.js' | asset_url}}" rel="preload" as="script">
      {%- when 'with-sidebar' -%}
        <link href="{{'product-with-sb-page.min.js' | asset_url}}" rel="preload" as="script">
      {%- else -%}
        {%- case settings.product_page -%}
          {%- when 'no-sidebar' -%}
            <link href="{{'product-no-sb-page.min.js' | asset_url}}" rel="preload" as="script">
          {%- when 'with-sidebar' -%}
            <link href="{{'product-with-sb-page.min.js' | asset_url}}" rel="preload" as="script">
          {%- when 'default' -%}
            <link href="{{'product-page.min.js' | asset_url}}" rel="preload" as="script">
        {%- endcase -%}
    {%- endcase -%}
  {%- when 'collection' -%}
    {%- case template.suffix -%}
      {%- when 'left-sidebar' -%}
        <link href="{{'collection-left-sidebar-page.min.js' | asset_url}}" rel="preload" as="script">
      {%- when 'infinite' -%}
        <link href="{{'collection-infinite-page.min.js' | asset_url}}" rel="preload" as="script">
      {%- when 'no-sidebar' -%}
        <link href="{{'collection-no-sidebar-page.min.js' | asset_url}}" rel="preload" as="script">
      {%- else -%}
        {%- case settings.collection_page -%}
          {%- when 'left-sidebar' -%}
            <link href="{{'collection-left-sidebar-page.min.js' | asset_url}}" rel="preload" as="script">
          {%- when 'no-sidebar' -%}
            <link href="{{'collection-no-sidebar-page.min.js' | asset_url}}" rel="preload" as="script">
          {%- when 'infinite' -%}
            <link href="{{'collection-infinite-page.min.js' | asset_url}}" rel="preload" as="script">
        {%- endcase -%}
    {%- endcase -%}

  {%- when 'page' -%}
    {%- case template.suffix -%}
      {%- when 'about' -%}
        <link href="{{'about-page.min.js' | asset_url}}" rel="preload" as="script">
    {%- endcase -%}
{%- endcase -%} {% endcomment %}

<script type="application/javascript">
  EventTarget.prototype.addEvent = EventTarget.prototype.addEventListener;
  EventTarget.prototype.removeEvent = EventTarget.prototype.removeEventListener;
  window.lazySizesConfig = window.lazySizesConfig || {};
  lazySizesConfig.loadMode = 1;
  lazySizesConfig.loadHidden = false;

  [
    "{{'lazysizes.min.js' | asset_url}}",
    "{{'tiny-slider.min.js' | asset_url}}",
    "{{'common.min.js' | asset_url}}",
    {%- case template.name -%}
      {%- when 'index' -%}
        "{{'home.min.js' | asset_url}}",
      {%- when 'article' -%}
        "{{'article-page.min.js' | asset_url}}",
      {%- when 'cart' -%}
        "{{'cart-page.min.js' | asset_url}}",
      {%- when 'product' -%}
        "{{'photoswipe.min.js' | asset_url}}",
        {%- case template.suffix -%}
          {%- when 'no-sidebar' -%}
            "{{'product-no-sb-page.min.js' | asset_url}}",
          {%- when 'with-sidebar' -%}
            "{{'product-with-sb-page.min.js' | asset_url}}",
          {%- else -%}
            {%- case settings.product_page -%}
              {%- when 'default' -%}
                "{{'product-page.min.js' | asset_url}}",
              {%- when 'with-sidebar' -%}
                "{{'product-with-sb-page.min.js' | asset_url}}",
              {%- when 'no-sidebar' -%}
                "{{'product-no-sb-page.min.js' | asset_url}}",
            {%- endcase -%}
        {%- endcase -%}
      {%- when 'collection' -%}
        {%- case template.suffix -%}
          {%- when 'no-sidebar' -%}
            "{{'collection-no-sidebar-page.min.js' | asset_url}}",
          {%- when 'left-sidebar' -%}
            "{{'collection-left-sidebar-page.min.js' | asset_url}}",
          {%- when 'infinite' -%}
            "{{'collection-infinite-page.min.js' | asset_url}}",
          {%- else -%}
            {%- case settings.collection_page -%}
              {%- when 'left-sidebar' -%}
                "{{'collection-left-sidebar-page.min.js' | asset_url}}",
              {%- when 'no-sidebar' -%}
                "{{'collection-no-sidebar-page.min.js' | asset_url}}",
              {%- when 'infinite' -%}
                "{{'collection-infinite-page.min.js' | asset_url}}",
            {%- endcase -%}
        {%- endcase -%}
      {% comment %} end {% endcomment %}

      {%- when 'page' -%}
        {%- case template.suffix -%}
          {%- when 'about' -%}
            "{{'about-page.min.js' | asset_url}}",
        {%- endcase -%}
    {%- endcase -%}
  ].forEach(url => {
    let link = document.createElement('link');
    link.href = url;
    link.rel = "preload";
    link.as = "script";
    document.head.prepend(link);
  })
</script>